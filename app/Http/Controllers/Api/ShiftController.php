<?php
bolt_decrypt( __FILE__ , 'WaIMFl'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcQXBpOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXE1peGluczsKdXNlIEFwcFxNb2RlbHNcU2hpZnQ7CnVzZSBDYXJib25cQ2FyYm9uOwp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3Q7CnVzZSBEQjsKdXNlIElsbHVtaW5hdGVcU3VwcG9ydFxTdHI7CgpjbGFzcyBTaGlmdENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIC8qKgogICAgICogRGlzcGxheSBhIGxpc3Rpbmcgb2YgdGhlIHJlc291cmNlLgogICAgICoKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaW5kZXgoKQogICAgewogICAgICAgICRzaGlmdCA9IFNoaWZ0Ojp3aXRoKFsncmVjaXZlZFVzZXInLCAnY3VycmVudFVzZXInXSktPndoZXJlTnVsbCgnZW5kX2RhdGUnKS0+Zmlyc3QoKTsKICAgICAgICByZXR1cm4gIGpzb25fZW5jb2RlKCRzaGlmdCk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHNoaWZ0UmVwb3J0KCRmcm9tLCAkdG8pCiAgICB7CgogICAgICAgIGlmICgkZnJvbSAhPSAibnVsbCIgJiYgJHRvICE9ICJudWxsIikgewogICAgICAgICAgICAkc2hpZnQgPSBTaGlmdDo6d2l0aChbJ3JlY2l2ZWRVc2VyJywgJ2N1cnJlbnRVc2VyJ10pCiAgICAgICAgICAgICAgICAtPndoZXJlRGF0ZSgnZW5kX2RhdGUnLCAnPD0nLCAkdG8pCiAgICAgICAgICAgICAgICAtPndoZXJlRGF0ZSgnZW5kX2RhdGUnLCAnPj0nLCAkZnJvbSktPmdldCgpLT5hbGwoKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oJHNoaWZ0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkY2xvc3VyZV9ob3VyID0gTWl4aW5zOjpzZWxlY3QoJ2Nsb3N1cmVfaG91cicpLT53aGVyZSgnaWQnLCAxKS0+Zmlyc3QoKTsKCiAgICAgICAgICAgICRzaGlmdCA9IFNoaWZ0Ojp3aXRoKFsncmVjaXZlZFVzZXInLCAnY3VycmVudFVzZXInXSktPndoZXJlRGF0ZSgnZW5kX2RhdGUnLCAnPj0nLCBDYXJib246Onllc3RlcmRheSgpLT5zZXRUaW1lKCRjbG9zdXJlX2hvdXItPmNsb3N1cmVfaG91ciwgMCkpLT5nZXQoKS0+YWxsKCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKCRzaGlmdCk7CiAgICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTdG9yZSBhIG5ld2x5IGNyZWF0ZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgIH0KCiAgICAvKioKICAgICAqIERpc3BsYXkgdGhlIHNwZWNpZmllZCByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNob3coJGlkKQogICAgewogICAgICAgIC8vCiAgICB9CgogICAgLyoqCiAgICAgKiBTaG93IHRoZSBmb3JtIGZvciBlZGl0aW5nIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHBhcmFtICBpbnQgICRpZAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KCRpZCkKICAgIHsKICAgICAgICAvLwogICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICAkdmFsaWRhdGVEYXRhID0gJHJlcXVlc3QtPnZhbGlkYXRlKFsKICAgICAgICAgICAgJ3Bhc3N3b3JkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnbmFtZScgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3RyYW5zZmVyJyA9PiAncmVxdWlyZWQnLAoKICAgICAgICBdKTsKCiAgICAgICAgJGNyZWRlbnRpYWxzID0gcmVxdWVzdChbJ25hbWUnLCAncGFzc3dvcmQnXSk7CiAgICAgICAgaWYgKCEkdG9rZW4gPSBhdXRoKCktPmF0dGVtcHQoJGNyZWRlbnRpYWxzKSkgewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbJ2Vycm9yJyA9PiAn2KrYo9mD2K8g2YXZhiDYqNmK2KfZhtin2Kog2KfZhNmF2YjYuNmBINin2YTZhdiz2KrZhNmFICEnXSwgNDAxKTsKICAgICAgICB9CiAgICAgICAgJHNoaWZ0ID0gREI6OnRhYmxlKCdzaGlmdHMnKS0+d2hlcmVOdWxsKCdlbmRfZGF0ZScpLT5maXJzdCgpOwogICAgICAgICR1c2VyID0gREI6OnRhYmxlKCd1c2VycycpLT53aGVyZSgnbmFtZScsICRyZXF1ZXN0LT5uYW1lKS0+Zmlyc3QoKTsKCiAgICAgICAgJGRhdGEgPSBhcnJheSgpOwoKICAgICAgICAkZGF0YVsnaW5jcmVhc2UnXSA9ICRyZXF1ZXN0LT5kcmF3ZXJDYXNoID4gJHJlcXVlc3QtPmNhc2ggPyAkcmVxdWVzdC0+ZHJhd2VyQ2FzaCAtICRyZXF1ZXN0LT5jYXNoIDogMDsKICAgICAgICAkZGF0YVsnZGVmaWNpdCddID0gJHJlcXVlc3QtPmRyYXdlckNhc2ggPCAkcmVxdWVzdC0+Y2FzaCA/ICRyZXF1ZXN0LT5jYXNoIC0gJHJlcXVlc3QtPmRyYXdlckNhc2ggICA6IDA7CiAgICAgICAgJGRhdGFbJ3RyYW5zZmVyJ10gPSAkcmVxdWVzdC0+dHJhbnNmZXI7CiAgICAgICAgJGRhdGFbJ2VuZF9kYXRlJ10gPSBub3coKTsKICAgICAgICAkZGF0YVsncmVtYWluJ10gPSAkcmVxdWVzdC0+cmVtYWluOwoKICAgICAgICAkZGF0YVsncmVjaXZlZF91c2VyJ10gPSAkdXNlci0+aWQ7CiAgICAgICAgREI6OnRhYmxlKCdzaGlmdHMnKS0+d2hlcmUoJ2lkJywgJGlkKS0+dXBkYXRlKCRkYXRhKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGUgc3BlY2lmaWVkIHJlc291cmNlIGZyb20gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koJGlkKQogICAgewogICAgICAgIC8vCiAgICB9Cn0K